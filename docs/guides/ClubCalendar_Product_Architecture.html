<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Architecture - ClubCalendar</title>
    <style>
        :root {
            --primary: #2c5aa0;
            --primary-dark: #1e4080;
            --text: #333;
            --text-light: #666;
            --bg: #fff;
            --bg-alt: #f8f9fa;
            --border: #e0e0e0;
            --code-bg: #f4f4f4;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.7;
            color: var(--text);
            margin: 0;
            padding: 0;
        }

        a {
            color: var(--primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Header */
        .header {
            background: var(--primary);
            color: white;
            padding: 20px;
        }

        .header-inner {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header a {
            color: white;
        }

        .header h1 {
            font-size: 1.3rem;
            margin: 0;
        }

        .header nav a {
            margin-left: 20px;
            opacity: 0.9;
        }

        .header nav a:hover {
            opacity: 1;
            text-decoration: none;
        }

        /* Main content */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            line-height: 1.3;
        }

        h1 { font-size: 2rem; margin-top: 0; }
        h2 { font-size: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 0.3em; }
        h3 { font-size: 1.25rem; }
        h4 { font-size: 1.1rem; }

        p {
            margin: 1em 0;
        }

        ul, ol {
            margin: 1em 0;
            padding-left: 2em;
        }

        li {
            margin: 0.5em 0;
        }

        /* Code */
        code {
            background: var(--code-bg);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
        }

        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1.5em 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5em 0;
        }

        th, td {
            border: 1px solid var(--border);
            padding: 10px 12px;
            text-align: left;
        }

        th {
            background: var(--bg-alt);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: var(--bg-alt);
        }

        /* Blockquote */
        blockquote {
            border-left: 4px solid var(--primary);
            margin: 1.5em 0;
            padding: 10px 20px;
            background: var(--bg-alt);
        }

        blockquote p {
            margin: 0;
        }

        /* Horizontal rule */
        hr {
            border: none;
            border-top: 1px solid var(--border);
            margin: 2em 0;
        }

        /* Back link */
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .back-link:hover {
            color: var(--primary);
        }

        /* Footer */
        .footer {
            border-top: 1px solid var(--border);
            padding: 30px 20px;
            text-align: center;
            color: var(--text-light);
            margin-top: 60px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .header-inner {
                flex-direction: column;
                gap: 10px;
            }

            pre {
                padding: 15px;
                font-size: 0.85em;
            }
        }
    </style>
</head>
<body>

<header class="header">
    <div class="header-inner">
        <h1><a href="../index.html">ClubCalendar</a></h1>
        <nav>
            <a href="../index.html">Home</a>
            <a href="https://github.com/edforman-75/clubcalendar">GitHub</a>
        </nav>
    </div>
</header>

<main class="container">
    <a href="../index.html" class="back-link">← Back to Home</a>

    <h1 id="clubcalendar-product-architecture">ClubCalendar Product
Architecture</h1>
<p><strong>Product Name:</strong> ClubCalendar <strong>Version:</strong>
0.1.0 (Design Phase) <strong>Last Updated:</strong> December 2025</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#overview">Overview</a></li>
<li><a href="#product-vision">Product Vision</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#components">Components</a></li>
<li><a href="#data-flow">Data Flow</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#deployment-options">Deployment Options</a></li>
<li><a href="#tag-conventions">Tag Conventions</a></li>
<li><a href="#admin-interface">Admin Interface</a></li>
<li><a href="#technical-requirements">Technical Requirements</a></li>
</ol>
<hr />
<h2 id="overview">Overview</h2>
<p>ClubCalendar is a configurable, filterable event calendar widget
designed for Wild Apricot organizations. It provides rich filtering
capabilities that Wild Apricot’s built-in calendar lacks, while being
simple enough for non-technical club administrators to configure.</p>
<h3 id="key-principles">Key Principles</h3>
<ul>
<li><strong>Read-only</strong>: Never modifies data in Wild Apricot</li>
<li><strong>Configurable</strong>: Administrators can customize filters,
colors, and behavior without code changes</li>
<li><strong>Flexible hosting</strong>: Works with Google Cloud
(recommended) or custom servers</li>
<li><strong>Progressive disclosure</strong>: Simple settings visible by
default, advanced settings available on demand</li>
<li><strong>Community-focused</strong>: Designed for clubs,
associations, and membership organizations</li>
</ul>
<hr />
<h2 id="product-vision">Product Vision</h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>Wild Apricot’s built-in event calendar shows all events in a simple
list with no filtering. For active organizations with many events,
members struggle to find events that match their interests, schedule,
and availability.</p>
<h3 id="solution">Solution</h3>
<p>ClubCalendar adds powerful filtering on top of Wild Apricot event
data:</p>
<ul>
<li>Filter by interest area, committee, time of day, cost,
availability</li>
<li>Quick-filter buttons for common needs (weekend, free, has
openings)</li>
<li>Visual indicators for event status and availability</li>
<li>Works for both logged-in members and public visitors</li>
</ul>
<h3 id="target-users">Target Users</h3>
<ol type="1">
<li><strong>Club Administrators</strong>: Configure the widget, define
filters, manage settings</li>
<li><strong>Event Organizers</strong>: Add tags to events when creating
them in WA</li>
<li><strong>Members</strong>: Use the calendar to discover and filter
events</li>
<li><strong>Public Visitors</strong>: Browse public events to learn
about the organization</li>
</ol>
<hr />
<h2 id="architecture">Architecture</h2>
<h3 id="high-level-architecture">High-Level Architecture</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         GOOGLE CLOUD (Free Tier)                            │
│                                                                             │
│  ┌─────────────────┐       ┌──────────────────────────────────────────┐    │
│  │ Cloud Scheduler │       │ Cloud Function: Sync Job                 │    │
│  │ (every 15 min)  │──────▶│ - Fetches events from WA API             │    │
│  └─────────────────┘       │ - Reads config from Firestore            │    │
│                            │ - Applies auto-tagging rules             │    │
│  ┌─────────────────┐       │ - Writes JSON to Cloud Storage           │    │
│  │ Cloud Function: │       └──────────────────────────────────────────┘    │
│  │ Admin UI        │                         │                              │
│  │ - Config forms  │                         ▼                              │
│  │ - Preview       │       ┌──────────────────────────────────────────┐    │
│  └────────┬────────┘       │ Cloud Storage                            │    │
│           │                │ - events.json (public read)              │    │
│           ▼                │ - widget.js (optional)                   │    │
│  ┌─────────────────┐       └──────────────────────────────────────────┘    │
│  │ Firestore       │                         │                              │
│  │ - Organization  │                         │                              │
│  │   configs       │                         │                              │
│  └─────────────────┘                         │                              │
└──────────────────────────────────────────────┼──────────────────────────────┘
                                               │
                      ┌────────────────────────┼────────────────────────┐
                      │                        ▼                        │
                      │  ┌──────────────────────────────────────────┐  │
                      │  │ Wild Apricot Website                     │  │
                      │  │                                          │  │
                      │  │  ┌────────────────────────────────────┐  │  │
                      │  │  │ ClubCalendar Widget                │  │  │
                      │  │  │ - Fetches events.json              │  │  │
                      │  │  │ - Renders filterable calendar      │  │  │
                      │  │  └────────────────────────────────────┘  │  │
                      │  │                                          │  │
                      │  │  Optional: widget.js in WA Resources     │  │
                      │  └──────────────────────────────────────────┘  │
                      │                                                │
                      │               WILD APRICOT                     │
                      └────────────────────────────────────────────────┘</code></pre>
<h3 id="alternative-custom-server-architecture">Alternative: Custom
Server Architecture</h3>
<p>For organizations preferring their own server (like
mail.sbnewcomers.org):</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         CUSTOM SERVER                                       │
│                                                                             │
│  ┌─────────────────┐       ┌──────────────────────────────────────────┐    │
│  │ Cron Job        │       │ Sync Script (Python/Node)                │    │
│  │ (every 15 min)  │──────▶│ - Fetches events from WA API             │    │
│  └─────────────────┘       │ - Reads config.json                      │    │
│                            │ - Applies auto-tagging rules             │    │
│  ┌─────────────────┐       │ - Writes events.json                     │    │
│  │ Admin UI        │       └──────────────────────────────────────────┘    │
│  │ (Web app)       │                         │                              │
│  └────────┬────────┘                         ▼                              │
│           │                ┌──────────────────────────────────────────┐    │
│           ▼                │ Static Files (served via HTTP)           │    │
│  ┌─────────────────┐       │ - /data/events.json                      │    │
│  │ config.json     │       │ - /widget/clubcalendar-widget.js         │    │
│  └─────────────────┘       └──────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="components">Components</h2>
<h3 id="sync-job-cron">1. Sync Job (Cron)</h3>
<p><strong>Purpose:</strong> Fetches events from Wild Apricot API,
applies transformations, outputs JSON</p>
<p><strong>Runs:</strong> Every 15 minutes (configurable)</p>
<p><strong>Inputs:</strong> - WA API credentials (account ID, API key) -
Configuration (auto-tag rules, filter settings)</p>
<p><strong>Outputs:</strong> - <code>events.json</code> - Event data
with tags, ready for widget consumption</p>
<p><strong>Key Functions:</strong> - Authenticate with WA API - Fetch
all upcoming events - Extract existing WA tags - Apply auto-tagging
rules (e.g., derive committee from event name) - Calculate derived
fields (time of day, availability status) - Write JSON to storage</p>
<h3 id="widget-javascript">2. Widget (JavaScript)</h3>
<p><strong>Purpose:</strong> Renders filterable calendar in the
browser</p>
<p><strong>Hosted:</strong> WA Resources, Google Cloud Storage, or CDN
(customer choice)</p>
<p><strong>Inputs:</strong> - <code>events.json</code> URL -
Configuration (inline or fetched)</p>
<p><strong>Features:</strong> - Multiple views (month, week, list) -
Filter dropdowns and quick-filter buttons - Event popup with details -
Responsive design - WA theme integration</p>
<h3 id="admin-configuration-ui">3. Admin Configuration UI</h3>
<p><strong>Purpose:</strong> Allow non-technical admins to configure the
widget</p>
<p><strong>Hosted:</strong> Google Cloud Function or custom server</p>
<p><strong>Sections:</strong></p>
<p><strong>Simple (visible by default):</strong> - Enable/disable filter
types - Customize labels - Choose colors - Select quick-filter buttons -
Set widget title</p>
<p><strong>Advanced (click to expand):</strong> - Add new tag categories
- Define auto-tagging rules - Committee name mappings - Interest keyword
mappings - API settings (refresh interval) - JSON/widget hosting
URLs</p>
<h3 id="configuration-storage">4. Configuration Storage</h3>
<p><strong>Purpose:</strong> Persist admin settings</p>
<p><strong>Options:</strong> - Google Firestore (for Google Cloud
deployment) - JSON file (for custom server deployment)</p>
<hr />
<h2 id="data-flow">Data Flow</h2>
<h3 id="event-data-flow">Event Data Flow</h3>
<pre><code>WA Event Created (with tags)
         │
         ▼
┌─────────────────────────┐
│ Wild Apricot Database   │
│ - Event details         │
│ - Manual tags           │
│ - Registration info     │
└───────────┬─────────────┘
            │
            │ WA API (every 15 min)
            ▼
┌─────────────────────────┐
│ Sync Job                │
│ - Fetch events          │
│ - Apply auto-tag rules  │
│ - Calculate derived     │
│   fields                │
└───────────┬─────────────┘
            │
            │ Write JSON
            ▼
┌─────────────────────────┐
│ events.json             │
│ - Event data            │
│ - Combined tags         │
│ - Derived fields        │
└───────────┬─────────────┘
            │
            │ Fetch (browser)
            ▼
┌─────────────────────────┐
│ ClubCalendar Widget     │
│ - Parse JSON            │
│ - Build filter options  │
│ - Render calendar       │
└─────────────────────────┘</code></pre>
<h3 id="configuration-flow">Configuration Flow</h3>
<pre><code>Admin opens Config UI
         │
         ▼
┌─────────────────────────┐
│ Admin UI                │
│ - Load current config   │
│ - Display forms         │
│ - Validate input        │
└───────────┬─────────────┘
            │
            │ Save
            ▼
┌─────────────────────────┐
│ Config Storage          │
│ (Firestore or JSON)     │
└───────────┬─────────────┘
            │
            │ Read (next sync)
            ▼
┌─────────────────────────┐
│ Sync Job                │
│ - Apply new rules       │
│ - Update events.json    │
└─────────────────────────┘</code></pre>
<hr />
<h2 id="configuration">Configuration</h2>
<h3 id="configuration-schema">Configuration Schema</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;organization&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Santa Barbara Newcomers Club&quot;</span><span class="fu">,</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;waAccountId&quot;</span><span class="fu">:</span> <span class="st">&quot;123456&quot;</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;timezone&quot;</span><span class="fu">:</span> <span class="st">&quot;America/Los_Angeles&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;sync&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;intervalMinutes&quot;</span><span class="fu">:</span> <span class="dv">15</span><span class="fu">,</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;eventsJsonUrl&quot;</span><span class="fu">:</span> <span class="st">&quot;https://storage.googleapis.com/clubcalendar-org123/events.json&quot;</span><span class="fu">,</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;widgetJsUrl&quot;</span><span class="fu">:</span> <span class="st">&quot;https://storage.googleapis.com/clubcalendar-org123/widget.js&quot;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;widget&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Find Events&quot;</span><span class="fu">,</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;primaryColor&quot;</span><span class="fu">:</span> <span class="st">&quot;#2c5aa0&quot;</span><span class="fu">,</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;accentColor&quot;</span><span class="fu">:</span> <span class="st">&quot;#d4a800&quot;</span><span class="fu">,</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;defaultView&quot;</span><span class="fu">:</span> <span class="st">&quot;month&quot;</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;filters&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;interestArea&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Interest Area&quot;</span><span class="fu">,</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;options&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;food&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Food &amp; Dining&quot;</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;outdoors&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Outdoors &amp; Hiking&quot;</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;arts&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Arts &amp; Culture&quot;</span><span class="fu">}</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;committee&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Committee&quot;</span><span class="fu">,</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;options&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;happy-hikers&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Happy Hikers&quot;</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;games&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Games!&quot;</span><span class="fu">}</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;cost&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Cost&quot;</span><span class="fu">,</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;options&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;free&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Free&quot;</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;under-25&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Under $25&quot;</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;under-50&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Under $50&quot;</span><span class="fu">}</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;quickFilters&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;weekend&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Weekend&quot;</span><span class="fu">,</span> <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;free&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Free&quot;</span><span class="fu">,</span> <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;has-openings&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Has Openings&quot;</span><span class="fu">,</span> <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;newbie-friendly&quot;</span><span class="fu">,</span> <span class="dt">&quot;label&quot;</span><span class="fu">:</span> <span class="st">&quot;Newbie Friendly&quot;</span><span class="fu">,</span> <span class="dt">&quot;enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">}</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;autoTagRules&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;name-prefix&quot;</span><span class="fu">,</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;pattern&quot;</span><span class="fu">:</span> <span class="st">&quot;Happy Hikers:&quot;</span><span class="fu">,</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;tag&quot;</span><span class="fu">:</span> <span class="st">&quot;committee:happy-hikers&quot;</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;name-prefix&quot;</span><span class="fu">,</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;pattern&quot;</span><span class="fu">:</span> <span class="st">&quot;Games!:&quot;</span><span class="fu">,</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;tag&quot;</span><span class="fu">:</span> <span class="st">&quot;committee:games&quot;</span></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;name-contains&quot;</span><span class="fu">,</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;pattern&quot;</span><span class="fu">:</span> <span class="st">&quot;hike&quot;</span><span class="fu">,</span></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;tag&quot;</span><span class="fu">:</span> <span class="st">&quot;activity:outdoors&quot;</span></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;name-contains&quot;</span><span class="fu">,</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;pattern&quot;</span><span class="fu">:</span> <span class="st">&quot;wine&quot;</span><span class="fu">,</span></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;tag&quot;</span><span class="fu">:</span> <span class="st">&quot;activity:wine&quot;</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;derivedFields&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;timeOfDay&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;morning&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;before&quot;</span><span class="fu">:</span> <span class="dv">12</span><span class="fu">},</span></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;afternoon&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="dv">12</span><span class="fu">,</span> <span class="dt">&quot;before&quot;</span><span class="fu">:</span> <span class="dv">17</span><span class="fu">},</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;evening&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="dv">17</span><span class="fu">}</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;costCategory&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;free&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;maxPrice&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">},</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;under-25&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;maxPrice&quot;</span><span class="fu">:</span> <span class="dv">25</span><span class="fu">},</span></span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;under-50&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="dt">&quot;maxPrice&quot;</span><span class="fu">:</span> <span class="dv">50</span><span class="fu">}</span></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="deployment-options">Deployment Options</h2>
<h3 id="option-1-google-cloud-recommended">Option 1: Google Cloud
(Recommended)</h3>
<p><strong>Best for:</strong> Most organizations, especially those
without technical staff</p>
<p><strong>Components:</strong> - Cloud Scheduler (triggers sync every
15 min) - Cloud Functions (sync job + admin UI) - Firestore
(configuration storage) - Cloud Storage (events.json hosting)</p>
<p><strong>Cost:</strong> Free for typical club usage</p>
<p><strong>Setup:</strong> Guided wizard in admin UI</p>
<h3 id="option-2-custom-server">Option 2: Custom Server</h3>
<p><strong>Best for:</strong> Organizations with existing infrastructure
or specific requirements</p>
<p><strong>Components:</strong> - Cron job on server (e.g., Linux
crontab) - Python/Node sync script - JSON config file - Static file
hosting (Apache/Nginx)</p>
<p><strong>Cost:</strong> Depends on existing infrastructure</p>
<p><strong>Setup:</strong> Manual installation with documentation</p>
<h3 id="widget-hosting-options">Widget Hosting Options</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 30%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr>
<th>Option</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>WA Resources</td>
<td>Pure WA, org controls it</td>
<td>Manual upload for updates</td>
</tr>
<tr>
<td>Google Cloud Storage</td>
<td>Auto-updated, versioned</td>
<td>External URL</td>
</tr>
<tr>
<td>CDN (jsDelivr)</td>
<td>Fast, global, versioned</td>
<td>Requires npm/GitHub publish</td>
</tr>
<tr>
<td>Custom Server</td>
<td>Full control</td>
<td>Org maintains it</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="tag-conventions">Tag Conventions</h2>
<h3 id="tag-format">Tag Format</h3>
<p>Tags use a <code>category:value</code> format for structured
data:</p>
<pre><code>activity:hiking
activity:wine
committee:happy-hikers
cost:free
cost:under-50
level:beginner</code></pre>
<p>Simple boolean tags use a single word:</p>
<pre><code>newbie-friendly
public-event
outdoor
morning</code></pre>
<h3 id="standard-tag-categories">Standard Tag Categories</h3>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 25%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Purpose</th>
<th>Example Values</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>activity</code></td>
<td>Interest/activity type</td>
<td>hiking, wine, food, arts, games</td>
</tr>
<tr>
<td><code>committee</code></td>
<td>Organizing committee</td>
<td>happy-hikers, games, wine-appreciation</td>
</tr>
<tr>
<td><code>cost</code></td>
<td>Price range</td>
<td>free, under-25, under-50, over-100</td>
</tr>
<tr>
<td><code>level</code></td>
<td>Skill/experience level</td>
<td>beginner, intermediate, advanced</td>
</tr>
<tr>
<td><code>location</code></td>
<td>Indoor/outdoor</td>
<td>indoor, outdoor, both</td>
</tr>
</tbody>
</table>
<h3 id="auto-derived-tags">Auto-Derived Tags</h3>
<p>These are calculated by the sync job, not entered manually:</p>
<table>
<thead>
<tr>
<th>Tag</th>
<th>Derived From</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>time:morning</code></td>
<td>Event start time before 12pm</td>
</tr>
<tr>
<td><code>time:afternoon</code></td>
<td>Event start time 12pm-5pm</td>
</tr>
<tr>
<td><code>time:evening</code></td>
<td>Event start time after 5pm</td>
</tr>
<tr>
<td><code>availability:open</code></td>
<td>Spots available</td>
</tr>
<tr>
<td><code>availability:limited</code></td>
<td>Less than 5 spots</td>
</tr>
<tr>
<td><code>availability:full</code></td>
<td>No spots available</td>
</tr>
<tr>
<td><code>day:weekend</code></td>
<td>Event on Saturday or Sunday</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="admin-interface">Admin Interface</h2>
<h3 id="simple-section-default-view">Simple Section (Default View)</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│  ClubCalendar Configuration                                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Widget Title: [Find Events                    ]                │
│                                                                 │
│  Colors:                                                        │
│  Primary: [#2c5aa0] [████]    Accent: [#d4a800] [████]          │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  Filters to Show:                                               │
│  ☑ Interest Area     ☑ Committee     ☑ Cost                    │
│  ☑ Time of Day       ☑ Availability                            │
│                                                                 │
│  Quick Filter Buttons:                                          │
│  ☑ Weekend    ☑ Free    ☑ Has Openings    ☑ Newbie Friendly    │
│  ☐ After Hours    ☐ Public Events    ☐ Morning Only            │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  [▶ Advanced Settings]                                          │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  [Save Configuration]              [Preview Widget]             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="advanced-section-expanded">Advanced Section (Expanded)</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│  [▼ Advanced Settings]                                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  FILTER OPTIONS                                                 │
│  ─────────────────                                              │
│  Interest Area Options:                                         │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ ID           │ Label           │ [Remove]               │   │
│  │ food         │ Food &amp; Dining   │ [×]                    │   │
│  │ outdoors     │ Outdoors        │ [×]                    │   │
│  │ arts         │ Arts &amp; Culture  │ [×]                    │   │
│  │ [+ Add Option]                                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  AUTO-TAGGING RULES                                             │
│  ──────────────────                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ If event name starts with &quot;Happy Hikers:&quot;               │   │
│  │ Then add tag: committee:happy-hikers          [×]       │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │ If event name contains &quot;wine&quot;                           │   │
│  │ Then add tag: activity:wine                   [×]       │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │ [+ Add Rule]                                            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  API SETTINGS                                                   │
│  ────────────                                                   │
│  WA Account ID: [123456        ]                                │
│  Sync Interval: [15] minutes                                    │
│  Events JSON URL: [https://storage.googleapis.com/...]          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="technical-requirements">Technical Requirements</h2>
<h3 id="for-google-cloud-deployment">For Google Cloud Deployment</h3>
<ul>
<li>Google Cloud account (free tier sufficient)</li>
<li>WA API credentials (Admin API key)</li>
<li>Domain for admin UI (optional, can use Cloud Function URL)</li>
</ul>
<h3 id="for-custom-server-deployment">For Custom Server Deployment</h3>
<ul>
<li>Linux server with cron</li>
<li>Python 3.8+ or Node.js 16+</li>
<li>HTTPS-enabled web server</li>
<li>WA API credentials</li>
</ul>
<h3 id="browser-support">Browser Support</h3>
<ul>
<li>Chrome 80+</li>
<li>Firefox 75+</li>
<li>Safari 13+</li>
<li>Edge 80+</li>
</ul>
<h3 id="dependencies">Dependencies</h3>
<p><strong>Sync Job:</strong> - Python: <code>requests</code>,
<code>google-cloud-storage</code>, <code>google-cloud-firestore</code> -
Node: <code>axios</code>, <code>@google-cloud/storage</code>,
<code>@google-cloud/firestore</code></p>
<p><strong>Widget:</strong> - FullCalendar 6.x (loaded from CDN) - No
jQuery required (optional for compatibility)</p>
<hr />
<h2 id="next-steps">Next Steps</h2>
<ol type="1">
<li><strong>Define JSON schema</strong> for events.json output file</li>
<li><strong>Create tag naming guide</strong> for event organizers</li>
<li><strong>Prototype sync job</strong> for Google Cloud Functions</li>
<li><strong>Prototype admin UI</strong> with simple section</li>
<li><strong>Adapt existing widget</strong> to use new JSON format</li>
</ol>
<hr />
<p><em>This document defines the architecture for ClubCalendar. It will
be updated as the design evolves.</em></p>
</main>

<footer class="footer">
    <p>ClubCalendar — Open source calendar widget for Wild Apricot</p>
</footer>

</body>
</html>
